<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>Dashboard | Complaints</title>

  <link rel="stylesheet" href="./css/dashboard.css">

  <!-- Leaflet -->
  <link
    rel="stylesheet"
    href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
  />
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

  <!-- Firebase Auth -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
    import { getAuth, onAuthStateChanged, signOut }
      from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

    const firebaseConfig = {
      apiKey: "AIzaSyDzcZLM7TuZ48mOi8SSEH_k3DOgPPCS78c",
      authDomain: "complaint-box-88c9b.firebaseapp.com",
      projectId: "complaint-box-88c9b",
      appId: "1:545419902164:web:74f9ef082557ffe31d0f41"
    };

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);

    onAuthStateChanged(auth, (user) => {
      if (!user) {
        window.location.href = "login.html";
      } else {
        if (window.loadMyComplaints) {
          window.loadMyComplaints();
        }
      }
    });

    window.logout = function () {
      signOut(auth).then(() => {
        window.location.href = "login.html";
      });
    };
  </script>
</head>

<body>

<div class="dashboard">

  <!-- SIDEBAR -->
  <div class="sidebar">
    <h2>ðŸ“Š Dashboard</h2>
    <a href="complaint.html">âž• New Complaint</a>
    <a href="#">ðŸ“‹ My Complaints</a>
    <a href="profile.html">ðŸ‘¤ Profile</a>
    <a href="#" onclick="logout()">ðŸšª Logout</a>
  </div>

  <!-- MAIN -->
  <div class="main">

    <!-- COMPLAINT LIST -->
    <div class="list">
      <h3>My Complaints</h3>
    </div>

    <!-- MAP -->
    <div id="map"></div>

  </div>
</div>

<script src="./js/dashboard.js"></script>
</body>
</html>
